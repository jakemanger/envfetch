<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Extract Values from a Raster Layer over a space — extract_over_space • envfetch</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Extract Values from a Raster Layer over a space — extract_over_space"><meta name="description" content="This function extracts values from a raster layer (r) over a spatial object
(x).
If the spatial object contains multiple z indices (e.g. time), then spatial
extractions for each time will be returned.
It also ensures that the extraction does not exceed available RAM. If the
raster is too large, the function can chunk the raster into smaller pieces
and process each chunk sequentially to avoid memory overflow."><meta property="og:description" content="This function extracts values from a raster layer (r) over a spatial object
(x).
If the spatial object contains multiple z indices (e.g. time), then spatial
extractions for each time will be returned.
It also ensures that the extraction does not exceed available RAM. If the
raster is too large, the function can chunk the raster into smaller pieces
and process each chunk sequentially to avoid memory overflow."><meta property="og:image" content="https://jakemanger.github.io/envfetch/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">envfetch</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/comparison.html">Comparison with other extraction methods</a></li>
    <li><a class="dropdown-item" href="../articles/using-internal-functions-of-envfetch.html">Using internal functions of envfetch</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Extract Values from a Raster Layer over a space</h1>

      <div class="d-none name"><code>extract_over_space.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function extracts values from a raster layer (r) over a spatial object
(x).
If the spatial object contains multiple z indices (e.g. time), then spatial
extractions for each time will be returned.
It also ensures that the extraction does not exceed available RAM. If the
raster is too large, the function can chunk the raster into smaller pieces
and process each chunk sequentially to avoid memory overflow.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_over_space</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">r</span>,</span>
<span>  spatial_fun <span class="op">=</span> <span class="va">mean</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  chunk <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  max_ram_frac_per_chunk <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  extraction_fun <span class="op">=</span> <span class="fu">terra</span><span class="fu">::</span><span class="va"><a href="https://rspatial.github.io/terra/reference/extract.html" class="external-link">extract</a></span>,</span>
<span>  scale <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>An sf spatial object, representing the locations over which raster
values need to be extracted.</p></dd>


<dt id="arg-r">r<a class="anchor" aria-label="anchor" href="#arg-r"></a></dt>
<dd><p>A <code><a href="https://rspatial.github.io/terra/reference/SpatRaster-class.html" class="external-link">terra::SpatRaster</a></code> object, representing the raster layer from
which values need to be extracted.</p></dd>


<dt id="arg-spatial-fun">spatial_fun<a class="anchor" aria-label="anchor" href="#arg-spatial-fun"></a></dt>
<dd><p>Function used to summarise multiple values within a
polygon or line. Is passed to <code>extraction_fun</code> internally. Defaults to
<code>mean</code>.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>Whether to remove NA values when summarising with the
<code>spatial_fun</code> function.</p></dd>


<dt id="arg-chunk">chunk<a class="anchor" aria-label="anchor" href="#arg-chunk"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, the raster will be split into chunks based
on available RAM and processed chunk by chunk. If <code>FALSE</code>, the raster will be
processed as a whole. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-max-ram-frac-per-chunk">max_ram_frac_per_chunk<a class="anchor" aria-label="anchor" href="#arg-max-ram-frac-per-chunk"></a></dt>
<dd><p>The maximum fraction of available memory to use
for each extraction chunk.</p></dd>


<dt id="arg-extraction-fun">extraction_fun<a class="anchor" aria-label="anchor" href="#arg-extraction-fun"></a></dt>
<dd><p>The extraction function to use. Default is
<code><a href="https://rspatial.github.io/terra/reference/extract.html" class="external-link">terra::extract</a></code>.</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>The scale to aggregate your raster to (in units of the
original raster). Note this will be rounded to fit the nearest aggregation
factor (number of cells in each direction). Leave as NULL (the default) if
you do not want any aggregation. See <a href="https://rspatial.github.io/terra/reference/aggregate.html" class="external-link">aggregate</a>.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Whether to print messages to the console. Defaults to TRUE.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments to pass to <code><a href="https://rspatial.github.io/terra/reference/extract.html" class="external-link">terra::extract</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A matrix or list where each column corresponds to a raster layer and
each row corresponds to a geometry in <code>x</code>. The values represent the raster
values at each point's location.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function uses the <code><a href="https://rspatial.github.io/terra/reference/mem.html" class="external-link">terra::mem_info</a></code> function to assess the RAM
requirements for the extraction. If chunking is required (i.e., the raster
data does not fit in available RAM), the raster is divided into a number of
chunks such that each chunk's RAM requirement does not exceed the available
RAM. The function then processes each chunk sequentially, extracting the
raster values over the spatial object, and combines the results at the end.
Progress of the extraction is displayed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Assuming 'some_raster' is a terra::SpatRaster object and 'some_sp' is a</span></span></span>
<span class="r-in"><span><span class="co"># spatial object:</span></span></span>
<span class="r-in"><span><span class="co"># result &lt;- extract_over_space(x=some_sp, r=some_raster)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jake Manger, Jacob Berson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

