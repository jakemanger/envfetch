<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Fetch environmental data over spatio-temporal geometries â€¢ envfetch</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="â€image/svg+xmlâ€" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Fetch environmental data over spatio-temporal geometries">
<meta name="description" content="Your trusty companion to fetch, extract and summarise environmental data over space and time using `sf` points or polygons.">
<meta property="og:description" content="Your trusty companion to fetch, extract and summarise environmental data over space and time using `sf` points or polygons.">
<meta property="og:image" content="https://jakemanger.github.io/envfetch/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">envfetch</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/comparison.html">Comparison with other extraction methods</a></li>
    <li><a class="dropdown-item" href="articles/using-internal-functions-of-envfetch.html">Using internal functions of envfetch</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="envfetch-">envfetch 
<a class="anchor" aria-label="anchor" href="#envfetch-"></a>
</h1>
</div>
<!-- badges: start -->

<p>Your trusty companion to fetch, extract and summarise environmental data over space (with <code>sf</code> points or polygons) and time (with a <code>lubridate</code> time <code>interval</code>, a single date or datetime).</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of envfetch like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">'jakemanger/envfetch'</span><span class="op">)</span></span></code></pre></div>
<p>To enable Google Earth Engine support, follow the below instructions:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/" class="external-link">rgee</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://r-spatial.github.io/rgee/reference/ee_install.html" class="external-link">ee_install</a></span><span class="op">(</span>py_env <span class="op">=</span> <span class="st">'rgee'</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://r-spatial.github.io/rgee/reference/ee_Initialize.html" class="external-link">ee_Initialize</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>and follow the prompts (saying <code>Y</code> when prompted).</p>
<p>Note, these instructions are from the <code>rgee</code> page, <a href="https://github.com/r-spatial/rgee#installation" class="external-link">here</a>. See this page if you run into problems. You may need to set the specific python environment used by <code>rgee</code> with <code>reticulate::use_python("path/in/ee_install/to/r-miniconda/envs/rgee/python.exe")</code> replacing <code>path/in/ee_install/to/r-miniconda/envs/rgee/python.exe</code> with the path of the installation listed by <code><a href="https://r-spatial.github.io/rgee/reference/ee_install.html" class="external-link">ee_install()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="section level3">
<h3 id="id_1-setup-sf-collection">1. Setup <code>sf</code> collection<a class="anchor" aria-label="anchor" href="#id_1-setup-sf-collection"></a>
</h3>
<p>Use of envfetch starts with an <code>sf</code> collection with a time column. For this example, we will use the <code>throw</code> function to create an <code>sf</code> collection containing a grid of points over Australia for a range of times. If you have your own data, load that in as a variable called <code>d</code> to continue with the example.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://jakemanger.github.io/envfetch/">envfetch</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/throw.html">throw</a></span><span class="op">(</span></span>
<span>  offset<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">128</span>, <span class="op">-</span><span class="fl">30</span><span class="op">)</span>,</span>
<span>  cellsize<span class="op">=</span><span class="fl">1</span>,</span>
<span>  n<span class="op">=</span><span class="fl">10</span>,</span>
<span>  time_interval<span class="op">=</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html" class="external-link">interval</a></span><span class="op">(</span>start<span class="op">=</span><span class="st">'2017-01-01'</span>, end<span class="op">=</span><span class="st">'2017-01-02'</span><span class="op">)</span>,</span>
<span><span class="op">)</span></span></code></pre></div>
<p>The data set should look like the following:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">d</span><span class="op">)</span></span>
<span><span class="co">#&gt;             time_column                  geometry  </span></span>
<span><span class="co">#&gt;  Intervals        :100          POINT        :100  </span></span>
<span><span class="co">#&gt;  Earliest endpoint:2017-01-01   epsg:4326    :  0  </span></span>
<span><span class="co">#&gt;  Latest endpoint  :2017-01-02   +proj=long...:  0  </span></span>
<span><span class="co">#&gt;  Time zone        :UTC</span></span></code></pre></div>
<p>Each row of the <code>sf</code> collection should have an <code>sf::geometry</code> along with a <code>datetime</code>. The <code>geometry</code> may be a point or a polygon. The <code>datetime</code> may be a time interval (<code><a href="https://lubridate.tidyverse.org/reference/interval.html" class="external-link">lubridate::interval</a></code>), a date (e.g.Â <code>"20220101"</code>) or a datetime <code>"2010-08-03 00:50:50"</code>. Ensure data used with the envfetch package matches this format.</p>
<p>We can visualise our input data with a plot:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rnaturalearth/" class="external-link">rnaturalearth</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/rnaturalearthdata/" class="external-link">rnaturalearthdata</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'rnaturalearthdata'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:rnaturalearth':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     countries110</span></span>
<span></span>
<span><span class="co"># load map of australia for reference</span></span>
<span><span class="va">world</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://docs.ropensci.org/rnaturalearth/reference/ne_countries.html" class="external-link">ne_countries</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="st">"medium"</span>, returnclass <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span></span>
<span><span class="va">australia</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="va">world</span>, <span class="va">admin</span> <span class="op">==</span> <span class="st">"Australia"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">australia</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">d</span>, size <span class="op">=</span> <span class="fl">1</span>, show.legend <span class="op">=</span> <span class="st">"point"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ggtitle</a></span><span class="op">(</span><span class="st">"Australia with sample points"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="reference/figures/README-unnamed-chunk-3-1.png" alt="plot of chunk unnamed-chunk-3" width="100%"><p class="caption">
plot of chunk unnamed-chunk-3
</p>
</div>
</div>
<div class="section level3">
<h3 id="id_2-extract-from-local-rasters-or-google-earth-engine-with-envfetch">2. Extract from local rasters or google earth engine with <code>envfetch</code>
<a class="anchor" aria-label="anchor" href="#id_2-extract-from-local-rasters-or-google-earth-engine-with-envfetch"></a>
</h3>
<p><strong><code>envfetch</code></strong>:</p>
<ul>
<li>extracts and summarises data over space (within each <code>sf</code> geometry) and time (at each time or within each time range) of your input,</li>
<li>provides a simple function to extract from local files or google earth engine (at fast speeds, see our <a href="./docs/articles/comparison-with-other-extraction-methods.html">comparison with other methods</a>),</li>
<li>ensures you donâ€™t overuse memory on your machine or google earth engine,</li>
<li>caches progress, so you donâ€™t have to re-extract the same thing twice and</li>
<li>allows you to repeat sampling over different times (see section 3, below).</li>
</ul>
<p>To fetch the data, supply <code>envfetch</code> with your data source. Here, you can extract from a local netcdf data set. To extract your own raster file, replace <code>example_nc_path</code> with the path of your local raster file, such as <code>'/path/to/netcdf.nc'</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_nc_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"example.nc"</span>, package <span class="op">=</span> <span class="st">"envfetch"</span><span class="op">)</span></span>
<span><span class="va">extracted</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/envfetch.html">envfetch</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d</span>, r <span class="op">=</span> <span class="va">example_nc_path</span><span class="op">)</span></span>
<span><span class="co">#&gt; â”€â”€ ğŸ¥ ğŸ• Fetching your data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span><span class="co">#&gt; â†’ Parsing time column</span></span>
<span><span class="co">#&gt; â„¹ Running ~extract_over_time(x = .x, r = r[[i]], temporal_fun = temporal_fun[[i]], spatial_fun = spatial_fun[[i]], ...)</span></span>
<span><span class="co">#&gt; â†’ Loading raster at path/to/envfetch/inst/extdata/example.nc</span></span>
<span><span class="co">#&gt; â†’ Finding relevant time slices</span></span>
<span><span class="co">#&gt; â†’ Extracting data...</span></span>
<span><span class="co">#&gt; â†’ 626080 Kbs of RAM is required for extraction and 2114265600 Kbs of RAM is available</span></span>
<span><span class="co">#&gt; â†’ Completed extraction</span></span>
<span><span class="co">#&gt; â†’ Summarising extracted data over specified times</span></span>
<span><span class="co">#&gt; â†’ Detected a vectorised row summarisation function. Using optimised summarisation approach with multiple rows as inputs.</span></span>
<span><span class="co">#&gt; âœ” ğŸ¶ Completed ~extract_over_time(x = .x, r = r[[i]], temporal_fun = temporal_fun[[i]], spatial_fun = spatial_fun[[i]], ...)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; â”€â”€ ğŸ© Fetched â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span></span>
<span><span class="co"># visualise with spacetimeview</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">spacetimeview</span><span class="op">)</span></span>
<span><span class="fu">spacetimeview</span><span class="op">(</span><span class="va">extracted</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="./readme_screenshot_1.png" alt="example_visualisation"><div class="figcaption">example_visualisation</div>
</div>
<p>or from a data set hosted on google earth engine.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">extracted</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/envfetch.html">envfetch</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">d</span>, r <span class="op">=</span> <span class="st">'MODIS/061/MOD13Q1'</span><span class="op">)</span></span>
<span><span class="co">#&gt; â”€â”€ rgee 1.1.5 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ earthengine-api 0.1.323 â”€â”€ </span></span>
<span><span class="co">#&gt;  âœ” user: not_defined</span></span>
<span><span class="co">#&gt;  âœ” Initializing Google Earth Engine:  DONE!</span></span>
<span><span class="co">#&gt;  âœ” Earth Engine account: users/dungbeetlelab </span></span>
<span><span class="co">#&gt; â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; â”€â”€ ğŸ¥ ğŸ• Fetching your data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span><span class="co">#&gt; â†’ Parsing time column</span></span>
<span><span class="co">#&gt; â„¹ Running ~extract_gee(x = .x, collection_name = r[[i]], bands = bands[[i]], temporal_fun = temporal_fun[[i]], ee_reducer_fun = spatial_fun[[i]], initialise_gee = FALSE, ...)</span></span>
<span><span class="co">#&gt; Number of features: 100                                                                                   </span></span>
<span><span class="co">#&gt; â†’ Summarising extracted data over specified times</span></span>
<span><span class="co">#&gt; âœ” ğŸ¶ Completed ~extract_gee(x = .x, collection_name = r[[i]], bands = bands[[i]], temporal_fun = temporal_fun[[i]], ee_reducer_fun = spatial_fun[[i]], initialise_gee = FALSE, ...)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; â”€â”€ ğŸ© Fetched â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span></code></pre></div>
<p>If you want to extract from multiple data sets at once, specify multiple items with a list. As weâ€™ve already calculated these, they are loaded from the cache instantly:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">extracted</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/envfetch.html">envfetch</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">d</span>, </span>
<span>  r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="va">example_nc_path</span>,</span>
<span>    <span class="st">'MODIS/061/MOD13Q1'</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; â”€â”€ rgee 1.1.5 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ earthengine-api 0.1.323 â”€â”€ </span></span>
<span><span class="co">#&gt;  âœ” user: not_defined</span></span>
<span><span class="co">#&gt;  âœ” Initializing Google Earth Engine:  DONE!</span></span>
<span><span class="co">#&gt;  âœ” Earth Engine account: users/dungbeetlelab </span></span>
<span><span class="co">#&gt; â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; â”€â”€ ğŸ¥ ğŸ• Fetching your data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span><span class="co">#&gt; â†’ Parsing time column</span></span>
<span><span class="co">#&gt; âœ” ğŸ•³ï¸ğŸ¦´ Dug up cached result of ~extract_over_time(x = .x, r = r[[i]], temporal_fun = temporal_fun[[i]], spatial_fun = spatial_fun[[i]], ...)</span></span>
<span><span class="co">#&gt; âœ” ğŸ•³ï¸ğŸ¦´ Dug up cached result of ~extract_gee(x = .x, collection_name = r[[i]], bands = bands[[i]], temporal_fun = temporal_fun[[i]], ee_reducer_fun = spatial_fun[[i]], initialise_gee = FALSE, ...)</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; â”€â”€ ğŸ© Fetched â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span></code></pre></div>
<p>If you want to change the default <code>mean</code> summarisation behaviour (e.g., calculate the <code>mean</code> for one raster and the <code>sum</code> for the other) or extract from specific bands of your data, specify some custom parameters:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">extracted</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/envfetch.html">envfetch</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">d</span>, </span>
<span>  r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="va">example_nc_path</span>,</span>
<span>    <span class="st">'MODIS/061/MOD13Q1'</span></span>
<span>  <span class="op">)</span>,</span>
<span>  bands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">'precip'</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'NDVI'</span>, <span class="st">'DetailedQA'</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  temporal_fun <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">'sum'</span>,</span>
<span>    <span class="st">'mean'</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; â”€â”€ rgee 1.1.5 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ earthengine-api 0.1.323 â”€â”€ </span></span>
<span><span class="co">#&gt;  âœ” user: not_defined</span></span>
<span><span class="co">#&gt;  âœ” Initializing Google Earth Engine:  DONE!</span></span>
<span><span class="co">#&gt;  âœ” Earth Engine account: users/dungbeetlelab </span></span>
<span><span class="co">#&gt; â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; â”€â”€ ğŸ¥ ğŸ• Fetching your data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span>
<span><span class="co">#&gt; â†’ Parsing time column</span></span>
<span><span class="co">#&gt; â„¹ Running ~extract_over_time(x = .x, r = r[[i]], temporal_fun = temporal_fun[[i]], spatial_fun = spatial_fun[[i]], ...)</span></span>
<span><span class="co">#&gt; â†’ Loading raster at path/to/envfetch/inst/extdata/example.nc</span></span>
<span><span class="co">#&gt; â†’ Finding relevant time slices</span></span>
<span><span class="co">#&gt; â†’ Extracting data...</span></span>
<span><span class="co">#&gt; â†’ 626080 Kbs of RAM is required for extraction and 2163716352 Kbs of RAM is available</span></span>
<span><span class="co">#&gt; â†’ Completed extraction</span></span>
<span><span class="co">#&gt; â†’ Summarising extracted data over specified times</span></span>
<span><span class="co">#&gt; â†’ Detected a vectorised row summarisation function. Using optimised summarisation approach with multiple rows as inputs.</span></span>
<span><span class="co">#&gt; âœ” ğŸ¶ Completed ~extract_over_time(x = .x, r = r[[i]], temporal_fun = temporal_fun[[i]], spatial_fun = spatial_fun[[i]], ...)</span></span>
<span><span class="co">#&gt; â„¹ Running ~extract_gee(x = .x, collection_name = r[[i]], bands = bands[[i]], temporal_fun = temporal_fun[[i]], ee_reducer_fun = spatial_fun[[i]], initialise_gee = FALSE, ...)</span></span>
<span><span class="co">#&gt; Number of features: 100                                                                                   </span></span>
<span><span class="co">#&gt; â†’ Summarising extracted data over specified times</span></span>
<span><span class="co">#&gt; âœ” ğŸ¶ Completed ~extract_gee(x = .x, collection_name = r[[i]], bands = bands[[i]], temporal_fun = temporal_fun[[i]], ee_reducer_fun = spatial_fun[[i]], initialise_gee = FALSE, ...)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; â”€â”€ ğŸ© Fetched â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="id_3-obtain-data-for-repeated-time-intervals">3. Obtain data for repeated time intervals<a class="anchor" aria-label="anchor" href="#id_3-obtain-data-for-repeated-time-intervals"></a>
</h3>
<p>In certain applications, you may need to obtain environmental data from repeated previous time intervals. For example, we can extract data from the past six months relative to the time (start time if an interval is provided) of each data point, with a summary calculated for each two-week block, using the <strong><code>.time_rep</code></strong> variable.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">rep_extracted</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/envfetch.html">envfetch</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">d</span>, </span>
<span>  r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">'/path/to/netcdf.nc'</span>,</span>
<span>    <span class="st">'MODIS/061/MOD13Q1'</span></span>
<span>  <span class="op">)</span>,</span>
<span>  bands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">'precip'</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'NDVI'</span>, <span class="st">'DetailedQA'</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  temporal_fun <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    <span class="st">'sum'</span>,</span>
<span>    <span class="st">'mean'</span></span>
<span>  <span class="op">)</span>,</span>
<span>  .time_rep<span class="op">=</span><span class="fu"><a href="reference/time_rep.html">time_rep</a></span><span class="op">(</span>interval<span class="op">=</span><span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">days</a></span><span class="op">(</span><span class="fl">14</span><span class="op">)</span>, n_start<span class="op">=</span><span class="op">-</span><span class="fl">12</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="extending-or-improving-envfetch">Extending or improving <code>envfetch</code>
<a class="anchor" aria-label="anchor" href="#extending-or-improving-envfetch"></a>
</h3>
<p>If you would like to extend the functionality of <code>envfetch</code> (for example, to add a new API service to extract data from), you can access and use the underlying functions that do caching, time repeating and extracting. A guide to use these functions, with examples, can be found <a href="%5B./docs/articles/using-internal-functions-of-envfetch.html%5D(https://jakemanger.github.io/envfetch/articles/comparison.html)">here</a>.</p>
<p>If you have a feature to contribute, please review our <a href="">Contributing Guide</a>.</p>
<p>If you find an error or a bug we would love to hear from you! Please let us know what you have found by creating an issue at <a href="https://github.com/jakemanger/envfetch/issues" class="external-link uri">https://github.com/jakemanger/envfetch/issues</a>.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing envfetch</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Jake Manger <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-0686-4788" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Jacob Berson <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-7059-2131" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/jakemanger/envfetch/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/jakemanger/envfetch/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jake Manger, Jacob Berson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
